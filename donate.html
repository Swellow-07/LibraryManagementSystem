<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donate</title>
</head>
<style>
    /* Your styles remain unchanged */
</style>
<body style="box-sizing: border-box; background: #F6E3BA;">
    <!-- Your header and navigation remain unchanged -->
    <div style="position:relative; top: 8vh;  opacity: 85%;text-align: center;left: auto;right: auto; border-top: 10px solid #C8AD7E;width: 100%;height: 470h; box-shadow: 0px -5px 10px rgba(0, 0, 0, 0.2), 0px 5px 10px rgba(0, 0, 0, 0.2); background-color: #FFEFCB;">

        <div class="container">
            <!-- Your container divs remain unchanged -->
            <div class="form">
                <!-- Your form and navigation remain unchanged -->

                <form action="donate.php" method="POST">
                    <h1>DONATE A BOOK</h1>
                    <input type="number" id="studentid" placeholder="Enter Your Student ID" name="studentid" required>
                    <input type="date" id="date" name="date" required>
                    <br>
                    <select name="bookname" id="bookname">
                        <option value="Lord Of The Rings">Lord Of The Rings</option>
                        <option value="Harry Potter">Harry Potter</option>
                        <option value="Book Of Night">Book Of Night</option>
                        <option value="Out Of Time">Out Of Time</option>
                    </select>
                    <input type="number" id="quantity" placeholder="Enter no of donations" max="5" name="quantity" required>
                    <br>
                    <input type="submit" value="Donate">
                </form>
            </div>

        </div>
        
        </div>
    </div>
    <script>
        // Set the current date in the date field
        function setCurrentDate() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('date').value = today;
        }
        setCurrentDate();

        // Handle book donation
        document.querySelector('form').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent form from submitting the traditional way

            let studentid = document.getElementById('studentid').value;
            let date = document.getElementById('date').value;
            let bookname = document.getElementById('bookname').value;
            let quantity = document.getElementById('quantity').value;

            console.log(studentid, date, bookname, quantity); // Debug log

            if (!studentid || !date || !bookname || !quantity) {
                alert('Please fill in all fields.');
                return;
            }

            let formData = new FormData();
            formData.append('studentid', studentid);
            formData.append('date', date);
            formData.append('bookname', bookname);
            formData.append('quantity', quantity);

            fetch('donate.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.text())
            .then(data => {
                alert(data);
                document.getElementById('studentid').value = '';
                document.getElementById('quantity').value = '';
            })
            .catch(error => console.error('Error:', error));
        });

        // Validate quantity input
        const quantityInput = document.getElementById('quantity');
        quantityInput.addEventListener('input', function() {
            const maxValue = parseInt(quantityInput.getAttribute('max'));
            if (parseInt(quantityInput.value) > maxValue) {
                quantityInput.value = maxValue;
                alert("Only 5 books can be donated at a time");
            }
        });
    </script>
</body>
</html>
